"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(b,c){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(b)){var d,e=[],f=!0,g=!1;try{for(var h,j=b[Symbol.iterator]();!(f=(h=j.next()).done)&&(e.push(h.value),!c||e.length!==c);f=!0);}catch(a){g=!0,d=a}finally{try{f||null==j.return||j.return()}finally{if(g)throw d}}return e}}function _arrayWithHoles(a){if(Array.isArray(a))return a}!function(){function a(a){return["elInY+elHeight","elCenterY-".concat(a=0<arguments.length&&void 0!==a?a:30),"elCenterY","elCenterY+".concat(a),"elOutY-elHeight"]}function g(a,b){if(Array.isArray(a))return a;for(var c,d=Object.keys(a).map(function(a){return parseInt(a)}).sort(function(a,b){return b<a?1:-1}),e=d[d.length-1],f=0;f<d.length;f++)if(c=d[f],b<c){e=c;break}return a[e]}function c(b,e,g){var h=e.width,j=e.height,i=e.x,k=e.y;if("number"==typeof b)return b;var m,n=document.body.scrollHeight,p=document.body.scrollWidth,q=window.innerWidth,c=window.innerHeight,d=_slicedToArray((m=void 0!==window.pageXOffset,d="CSS1Compat"===(document.compatMode||""),e=m?window.pageXOffset:(d?document.documentElement:document.body).scrollLeft,[m?window.pageYOffset:(d?document.documentElement:document.body).scrollTop,e]),2),e=d[0],i=i+d[1],d=i+h,k=k+e,e=k+j;return Function("return ".concat(b.replace(/screenWidth/g,q).replace(/screenHeight/g,c).replace(/pageHeight/g,n).replace(/pageWidth/g,p).replace(/elWidth/g,h).replace(/elHeight/g,j).replace(/elInY/g,k-c).replace(/elOutY/g,e).replace(/elCenterY/g,k+j/2-c/2).replace(/elInX/g,i-q).replace(/elOutX/g,d).replace(/elCenterX/g,i+h/2-q/2).replace(/index/g,g)))()}function b(a,c){var d=this,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,b),_defineProperty(this,"getValueFn",void 0),_defineProperty(this,"name",""),_defineProperty(this,"lastValue",0),_defineProperty(this,"frameStep",1),_defineProperty(this,"m1",0),_defineProperty(this,"m2",0),_defineProperty(this,"inertia",0),_defineProperty(this,"inertiaEnabled",!1),_defineProperty(this,"getValue",function(a){var b=d.lastValue;return 0==a%d.frameStep&&(b=d.getValueFn(a)),d.inertiaEnabled&&(a=b-d.lastValue,d.m1=.8*d.m1+a*(1-.8),d.m2=.8*d.m2+d.m1*(1-.8),d.inertia=Math.round(5e3*d.m2)/15e3),d.lastValue=b,[d.lastValue,d.inertia]}),this.name=a,this.getValueFn=c,Object.keys(f).forEach(function(a){d[a]=f[a]}),this.lastValue=this.getValueFn(0)}function d(l,e,m,p){var x=this,b=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};_classCallCheck(this,d),_defineProperty(this,"domElement",void 0),_defineProperty(this,"transformsData",void 0),_defineProperty(this,"styles",{}),_defineProperty(this,"selector",""),_defineProperty(this,"groupIndex",0),_defineProperty(this,"laxInstance",void 0),_defineProperty(this,"onUpdate",void 0),_defineProperty(this,"update",function(b,e){var j,t=x.transforms,r={};for(j in t){var i=t[j];b[j]||console.error("No lax driver with name: ",j);var o,z=_slicedToArray(b[j],2),l=z[0],u=z[1];for(o in i){var s,A=_slicedToArray(i[o],3),B=A[0],f=A[1],h=A[2],C=void 0===h?{}:h,D=C.modValue,g=C.frameStep,E=void 0===g?1:g,v=C.easing,A=C.inertia,h=C.inertiaMode,g=C.cssFn,C=C.cssUnit,C=void 0===C?"":C,v=n[v];0==e%E&&(v=function(b,c,d,f){var g=0;if(b.forEach(function(a){a<d&&g++}),0>=g)return c[0];if(g>=b.length)return c[b.length-1];var h,j=(j=b[h=g-1],b=b[g],(d-j)/(b-j));return f&&(j=f(j)),h=c[h],c=c[g],h*(1-(j=j))+c*j}(B,f,D?l%D:l,v),A&&(s=u*A,"absolute"===h&&(s=Math.abs(s)),v+=s),s="px"==(C||k.includes(o)?"px":q.includes(o)?"deg":"")?0:3,s=v.toFixed(s),r[o]=g?g(s,x.domElement):s+C)}}x.applyStyles(r),x.onUpdate&&x.onUpdate(b,x.domElement)}),_defineProperty(this,"calculateTransforms",function(){x.transforms={};var a,b=x.laxInstance.windowWidth;for(a in x.transformsData)!function(d){var f=x.transformsData[d],h={},a=f.presets;for(var e in(void 0===a?[]:a).forEach(function(a){var b,c=_slicedToArray(a.split(":"),3),d=c[0],g=c[1],a=c[2],c=window.lax.presets[d];c?(b=c(g,a),Object.keys(b).forEach(function(a){f[a]=b[a]})):console.error("Lax preset cannot be found with name: ",d)}),delete f.presets,f)!function(a){var d=_slicedToArray(f[a],3),e=d[0],j=void 0===e?[-1e9,1e9]:e,e=d[1],e=void 0===e?[-1e9,1e9]:e,d=d[2],d=void 0===d?{}:d,k=x.domElement.getBoundingClientRect(),j=g(j,b).map(function(a){return c(a,k,x.groupIndex)}),e=g(e,b).map(function(a){return c(a,k,x.groupIndex)});h[a]=[j,e,d]}(e);x.transforms[d]=h}(a)}),_defineProperty(this,"applyStyles",function(a){var b,c,d,g=(b=a,c={transform:"",filter:""},d={translateX:1e-5,translateY:1e-5,translateZ:1e-5},Object.keys(b).forEach(function(a){var e=b[a],g=k.includes(a)?"px":q.includes(a)?"deg":"";j.includes(a)?d[a]=e:f.includes(a)?c.transform+="".concat(a,"(").concat(e).concat(g,") "):h.includes(a)?c.filter+="".concat(a,"(").concat(e).concat(g,") "):c[a]="".concat(e).concat(g," ")}),c.transform="translate3d(".concat(d.translateX,"px, ").concat(d.translateY,"px, ").concat(d.translateZ,"px) ").concat(c.transform),c);Object.keys(g).forEach(function(a){x.domElement.style.setProperty(a,g[a])})}),this.selector=l,this.laxInstance=e,this.domElement=m,this.transformsData=p,this.groupIndex=b;var s=void 0===(b=r.style)?{}:b,r=r.onUpdate;Object.keys(s).forEach(function(a){m.style.setProperty(a,s[a])}),r&&(this.onUpdate=r),this.calculateTransforms()}var f,h,j,k,q,n,i={fadeInOut:function(b,c){return c=1<arguments.length&&void 0!==c?c:0,{opacity:[a(0<arguments.length&&void 0!==b?b:30),[c,1,1,1,c]]}},fadeIn:function(a,b){return{opacity:[["elInY+elHeight",0<arguments.length&&void 0!==a?a:"elCenterY"],[1<arguments.length&&void 0!==b?b:0,1]]}},fadeOut:function(a,b){return{opacity:[[0<arguments.length&&void 0!==a?a:"elCenterY","elOutY-elHeight"],[1,1<arguments.length&&void 0!==b?b:0]]}},blurInOut:function(b,c){return c=1<arguments.length&&void 0!==c?c:20,{blur:[a(0<arguments.length&&void 0!==b?b:100),[c,0,0,0,c]]}},blurIn:function(a,b){return{blur:[["elInY+elHeight",0<arguments.length&&void 0!==a?a:"elCenterY"],[1<arguments.length&&void 0!==b?b:20,0]]}},blurOut:function(a,b){return{opacity:[[0<arguments.length&&void 0!==a?a:"elCenterY","elOutY-elHeight"],[0,1<arguments.length&&void 0!==b?b:20]]}},scaleInOut:function(b,c){return c=1<arguments.length&&void 0!==c?c:.6,{scale:[a(0<arguments.length&&void 0!==b?b:100),[c,1,1,1,c]]}},scaleIn:function(a,b){return{scale:[["elInY+elHeight",0<arguments.length&&void 0!==a?a:"elCenterY"],[1<arguments.length&&void 0!==b?b:.6,1]]}},scaleOut:function(a,b){return{scale:[[0<arguments.length&&void 0!==a?a:"elCenterY","elOutY-elHeight"],[1,1<arguments.length&&void 0!==b?b:.6]]}},slideX:function(a,b){return{translateX:[["elInY",0<arguments.length&&void 0!==a?a:0],[0,1<arguments.length&&void 0!==b?b:500]]}},slideY:function(a,b){return{translateY:[["elInY",0<arguments.length&&void 0!==a?a:0],[0,1<arguments.length&&void 0!==b?b:500]]}},spin:function(a,b){return a=0<arguments.length&&void 0!==a?a:1e3,{rotate:[[0,a],[0,1<arguments.length&&void 0!==b?b:360],{modValue:a}]}},flipX:function(a,b){return a=0<arguments.length&&void 0!==a?a:1e3,{rotateX:[[0,a],[0,1<arguments.length&&void 0!==b?b:360],{modValue:a}]}},flipY:function(a,b){return a=0<arguments.length&&void 0!==a?a:1e3,{rotateY:[[0,a],[0,1<arguments.length&&void 0!==b?b:360],{modValue:a}]}},jiggle:function(a,b){return a=0<arguments.length&&void 0!==a?a:50,b=1<arguments.length&&void 0!==b?b:40,{skewX:[[0,+a,2*a,3*a,4*a],[0,b,0,-b,0],{modValue:4*a}]}},seesaw:function(a,b){return a=0<arguments.length&&void 0!==a?a:50,b=1<arguments.length&&void 0!==b?b:40,{skewY:[[0,+a,2*a,3*a,4*a],[0,b,0,-b,0],{modValue:4*a}]}},zigzag:function(a,b){return a=0<arguments.length&&void 0!==a?a:100,b=1<arguments.length&&void 0!==b?b:100,{translateX:[[0,+a,2*a,3*a,4*a],[0,b,0,-b,0],{modValue:4*a}]}},hueRotate:function(a,b){return a=0<arguments.length&&void 0!==a?a:600,{"hue-rotate":[[0,a],[0,1<arguments.length&&void 0!==b?b:360],{modValue:a}]}}},m=(f=["perspective","scaleX","scaleY","scale","skewX","skewY","skew","rotateX","rotateY","rotate"],h=["blur","hue-rotate","brightness"],j=["translateX","translateY","translateZ"],k=["perspective","border-radius","blur","translateX","translateY","translateZ"],q=["hue-rotate","rotate","rotateX","rotateY","skew","skewX","skewY"],n={easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return .5>a?2*a*a:(4-2*a)*a-1},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return .5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return .5>a?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return .5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a},easeOutBounce:function(a){var b=7.5625,c=2.75;return a<1/c?b*a*a:a<2/c?b*(a-=1.5/c)*a+.75:a<2.5/c?b*(a-=2.25/c)*a+.9375:b*(a-=2.625/c)*a+.984375},easeInBounce:function(a){return 1-n.easeOutBounce(1-a)},easeOutBack:function(a){return 1+2.70158*Math.pow(a-1,3)+1.70158*Math.pow(a-1,2)},easeInBack:function(a){return 2.70158*a*a*a-1.70158*a*a}},new function a(){var c=this;_classCallCheck(this,a),_defineProperty(this,"drivers",[]),_defineProperty(this,"elements",[]),_defineProperty(this,"frame",0),_defineProperty(this,"debug",!1),_defineProperty(this,"windowWidth",0),_defineProperty(this,"windowHeight",0),_defineProperty(this,"presets",i),_defineProperty(this,"debugData",{frameLengths:[]}),_defineProperty(this,"init",function(){c.findAndAddElements(),window.requestAnimationFrame(c.onAnimationFrame),c.windowWidth=document.body.clientWidth,c.windowHeight=document.body.clientHeight,window.onresize=c.onWindowResize}),_defineProperty(this,"onWindowResize",function(){document.body.clientWidth===c.windowWidth&&document.body.clientHeight===c.windowHeight||(c.windowWidth=document.body.clientWidth,c.windowHeight=document.body.clientHeight,c.elements.forEach(function(a){return a.calculateTransforms()}))}),_defineProperty(this,"onAnimationFrame",function(){c.debug&&(c.debugData.frameStart=Date.now());var a,b={};c.drivers.forEach(function(a){b[a.name]=a.getValue(c.frame)}),c.elements.forEach(function(a){a.update(b,c.frame)}),c.debug&&c.debugData.frameLengths.push(Date.now()-c.debugData.frameStart),0==c.frame%60&&c.debug&&(a=Math.ceil(c.debugData.frameLengths.reduce(function(a,b){return a+b},0)/60),console.log("Average frame calculation time: ".concat(a,"ms")),c.debugData.frameLengths=[]),c.frame++,window.requestAnimationFrame(c.onAnimationFrame)}),_defineProperty(this,"addDriver",function(a,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};c.drivers.push(new b(a,d,e))}),_defineProperty(this,"removeDriver",function(a){c.drivers=c.drivers.filter(function(b){return b.name!==a})}),_defineProperty(this,"findAndAddElements",function(){c.elements=[],document.querySelectorAll(".lax").forEach(function(a){var b=[];a.classList.forEach(function(a){a.includes("lax_preset")&&(a=a.replace("lax_preset_",""),b.push(a))});var e=_defineProperty({},"scrollY",{presets:b});c.elements.push(new d(".lax",c,a,e,0,{}))})}),_defineProperty(this,"addElements",function(a,b,f){document.querySelectorAll(a).forEach(function(g,e){c.elements.push(new d(a,c,g,b,e,f))})}),_defineProperty(this,"removeElements",function(a){c.elements=c.elements.filter(function(b){return b.selector!==a})}),_defineProperty(this,"addElement",function(a,b,e){c.elements.push(new d("",c,a,b,0,e))}),_defineProperty(this,"removeElement",function(a){c.elements=c.elements.filter(function(b){return b.domElement!==a})})});"undefined"!=typeof module&&void 0!==module.exports?module.exports=m:window.lax=m}();